<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Adventure Capital HRSP Reports</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: system-ui, sans-serif; background:#f1f4f9; margin:0; padding:1rem; }
    .card { background:#fff; padding:1rem; border-radius:8px; max-width:800px; margin:auto; box-shadow:0 4px 12px rgba(0,0,0,0.05); }
    h1, h2, h3 { margin:0.5rem 0; }
    label { display:block; margin:0.5rem 0 0.2rem; }
    input, select, button { width:100%; padding:0.5rem; border:1px solid #ccc; border-radius:4px; box-sizing:border-box; }
    .inline { display:flex; gap:1rem; flex-wrap:wrap; }
    .inline > * { flex:1; min-width:120px; }
    button { background:#5f72ff; color:#fff; border:none; cursor:pointer; margin-top:1rem; }
    /* hidden PDF template */
    #pdf-template { display:none; }
    #pdf-content { background:#fff; padding:1rem; }
    #pdf-content h1, #pdf-content h2 { margin-bottom:0.5rem; }
    #pdf-content table { width:100%; border-collapse:collapse; margin-top:0.5rem; }
    #pdf-content th, #pdf-content td { border:1px solid #aaa; padding:0.5rem; text-align:left; }
    .total { background:#eef4fb; font-weight:bold; }
    .callout { border-left:4px solid #5f72ff; background:#f7f9fc; padding:0.5rem; margin:0.5rem 0; }
    .signature { display:flex; justify-content:space-between; margin-top:2rem; }
  </style>
  <!-- html2pdf.js bundle -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
</head>
<body>

  <div class="card">
    <h1>Generate Monthly Report</h1>
    <div class="inline">
      <label>Type
        <select id="reportType">
          <option value="compensation">Compensation</option>
          <option value="pnl">P&L Statement</option>
        </select>
      </label>
      <label>Date
        <input type="month" id="reportDate" value="">
      </label>
    </div>
    <label>Submitter
      <input type="text" id="submitter" value="Jorge Mendieta">
    </label>
    <label>Company
      <input type="text" id="company" value="Adventure Capital HRSP">
    </label>
    <label>Park
      <input type="text" id="park" value="Hillsborough River State Park">
    </label>

    <!-- Compensation inputs -->
    <div id="compFields">
      <h3>Sales Summary</h3>
      <div class="inline">
        <label>Gross Sales<input type="number" id="grossSales" step="0.01" value="0"></label>
        <label>Net Sales  <input type="number" id="netSales"  step="0.01" value="0"></label>
        <label>Taxes      <input type="number" id="taxes"     step="0.01" value="0"></label>
      </div>
    </div>

    <!-- P&L inputs -->
    <div id="pnlFields" style="display:none;">
      <h3>Revenue</h3>
      <label>Gross Sales<input type="number" id="pnlGross" step="0.01" value="0"></label>
      <h3>Expenses</h3>
      <div id="expenseInputs">
        <div class="inline">
          <label>Food &amp; Beverage<input type="number" data-cat="COGS" value="0" step="0.01"></label>
          <label>Staff (Payroll)<input type="number" data-cat="Payroll" value="0" step="0.01"></label>
        </div>
        <div class="inline">
          <label>Rental/Overhead<input type="number" data-cat="Rental/Overhead" value="0" step="0.01"></label>
          <label>Maintenance<input type="number" data-cat="Maintenance" value="0" step="0.01"></label>
        </div>
        <div class="inline">
          <label>Other<input type="number" data-cat="Other" value="0" step="0.01"></label>
        </div>
      </div>
      <label>Note (e.g. tax-exempt)<input type="text" id="pnlNote"></label>
    </div>

    <button id="generateBtn">Generate PDF</button>
  </div>

  <!-- hidden area for PDF rendering -->
  <div id="pdf-template">
    <div id="pdf-content"></div>
  </div>

  <script>
    // toggle fields based on type
    document.getElementById('reportType').addEventListener('change', e => {
      let isComp = e.target.value === 'compensation';
      document.getElementById('compFields').style.display = isComp ? '' : 'none';
      document.getElementById('pnlFields').style.display  = isComp ? 'none' : '';
    });

    document.getElementById('generateBtn').onclick = () => {
      const type = document.getElementById('reportType').value;
      const date = document.getElementById('reportDate').value;
      const submitter = document.getElementById('submitter').value;
      const company = document.getElementById('company').value;
      const park = document.getElementById('park').value;

      let html = '';
      html += `<div><h1>${ type==='compensation'?'Monthly Compensation':'Monthly P&L Statement' }</h1>`;
      html += `<div>${company} â€“ ${park}</div>`;
      html += `<div>Date: ${date}</div><div>By: ${submitter}</div></div>`;

      if(type==='compensation') {
        const gross = parseFloat(document.getElementById('grossSales').value)||0;
        const net   = parseFloat(document.getElementById('netSales').value)||0;
        const tax   = parseFloat(document.getElementById('taxes').value)||0;
        html += `<h2>Sales Summary</h2>`;
        html += `<table>
          <tr><td>Gross Sales</td><td>$${gross.toFixed(2)}</td></tr>
          <tr><td>Net Sales</td><td>$${net.toFixed(2)}</td></tr>
          <tr><td>Taxes</td><td>$${tax.toFixed(2)}</td></tr>
        </table>`;
      } else {
        const gross = parseFloat(document.getElementById('pnlGross').value)||0;
        html += `<h2>Revenue</h2><table><tr><td>Gross Sales</td><td>$${gross.toFixed(2)}</td></tr></table>`;
        // gather expenses
        const inputs = document.querySelectorAll('#expenseInputs input');
        let sums = { COGS:0, Payroll:0, 'Rental/Overhead':0, Maintenance:0, Other:0 };
        inputs.forEach(i=>{
          const cat = i.getAttribute('data-cat'),
                v   = parseFloat(i.value)||0;
          sums[cat] += v;
        });
        let total=0;
        html += `<h2>Expenses</h2><table>`;
        for(let cat in sums){
          html += `<tr><td>${cat}</td><td>$${sums[cat].toFixed(2)}</td></tr>`;
          total += sums[cat];
        }
        const profit = gross - total;
        html += `<tr class="total"><td>Total Expenses</td><td>$${total.toFixed(2)}</td></tr>`;
        html += `<tr class="total"><td>Profit/(Loss)</td><td>$${profit.toFixed(2)}</td></tr>`;
        html += `</table>`;
        const note = document.getElementById('pnlNote').value;
        if(note) html += `<div class="callout">${note}</div>`;
      }

      html += `<div class="signature">
        <div>Prepared by: ${submitter}</div>
        <div>Signature: ____________________</div>
      </div>`;

      // render and download
      const container = document.getElementById('pdf-content');
      container.innerHTML = html;
      html2pdf().from(container).set({
        margin:       [10,10,10,10],
        filename:     `${ type }-${date}.pdf`,
        html2canvas:  { scale:2 },
        jsPDF:        { unit:'mm', format:'a4' }
      }).save();
    };
  </script>
</body>
</html>

